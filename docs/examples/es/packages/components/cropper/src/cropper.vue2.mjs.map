{"version":3,"file":"cropper.vue2.mjs","sources":["../../../../../../../packages/components/cropper/src/cropper.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { defineComponent as DO_defineComponent } from 'vue';\nexport default /*#__PURE__*/ DO_defineComponent({\r\n  name: 'WmCropper',\r\n});\n</script>\n<script setup lang=\"ts\">\r\nimport { reactive, ref} from 'vue'\r\nimport VuePictureCropper, { cropper } from 'vue-picture-cropper'\r\n\r\n\r\n\r\nconst emits = defineEmits([\"savePic\"])\r\nconst props=defineProps({\r\n    pic:{\r\n        type:String,\r\n        default:\"\"\r\n    },\r\n    type:{\r\n        type:String,\r\n        default:\"primary\"\r\n    },\r\n    boxStyle:{\r\n        type:Object,\r\n        default:()=>{\r\n            return {\r\n                width: '100%',\r\n                height: '100%',\r\n                backgroundColor: '#f8f8f8',\r\n                margin: 'auto'\r\n            }\r\n        }\r\n    },\r\n    options:{\r\n        type:Object,\r\n        default:()=>{\r\n            return {\r\n                viewMode: 1,\r\n                dragMode: 'crop',\r\n            }\r\n        }\r\n    },\r\n})\r\nlet Pic=ref(props.pic)\r\nlet TempPic=ref(props.pic)\r\nconst cropend = ()=>{\r\n    TempPic.value=cropper!.getDataURL()\r\n}\r\nconst zoom = ()=>{\r\n    TempPic.value=cropper!.getDataURL()\r\n}\r\nconst rotateLeft = (): void => {\r\n    cropper!.rotate(-90);\r\n}\r\nconst rotateRight = (): void => {\r\n    cropper!.rotate(90);\r\n}\r\nconst zoomAdd = (): void => {\r\n    cropper!.zoom(0.1);\r\n}\r\nconst zoomSubtract = (): void => {\r\n    cropper!.zoom(-0.1);\r\n}\r\nconst clear = (): void => {\r\n    cropper!.clear()\r\n}\r\n// 重置默认的裁切区域\r\nconst reset = (): void => {\r\n    cropper!.reset()\r\n}\r\nlet result=reactive({\r\n    dataURL:\"\",\r\n    blobURL:\"\"\r\n})\r\nconst savePic = async (): Promise<void> => {\r\n    // 获取生成的base64图片地址\r\n    const base64: string = cropper!.getDataURL()\r\n\r\n    // 获取生成的blob文件信息\r\n    const blob: Blob | null = await cropper!.getBlob()\r\n\r\n    // 获取生成的file文件信息\r\n    const file = await cropper!.getFile({\r\n        fileName: 'cropper',\r\n    })\r\n\r\n    console.log({ base64, blob, file })\r\n\r\n    // 把base64赋给结果展示区\r\n    result.dataURL = base64\r\n    try {\r\n        if (blob!=null){\r\n            result.blobURL = URL.createObjectURL(blob)\r\n        }\r\n    } catch (e) {\r\n        result.blobURL = ''\r\n    }\r\n    console.log(result)\r\n    emits(\"savePic\",result)\r\n}\r\n</script>\r\n\r\n<template>\r\n    <div class=\"cropper-box\">\r\n        <div class=\"button-box\">\r\n            <el-button :type=\"props.type\" @click=\"rotateLeft\">逆时针90</el-button>\r\n            <el-button :type=\"props.type\" @click=\"rotateRight\">顺时针90</el-button>\r\n            <el-button :type=\"props.type\" @click=\"zoomAdd\">+</el-button>\r\n            <el-button :type=\"props.type\" @click=\"zoomSubtract\">-</el-button>\r\n            <el-button :type=\"props.type\" @click=\"clear\">清除</el-button>\r\n            <el-button :type=\"props.type\" @click=\"reset\">重置</el-button>\r\n            <el-button :type=\"props.type\" @click=\"savePic\">保存</el-button>\r\n        </div>\r\n        <el-row gutter=\"20\" class=\"main\">\r\n            <el-col :span=\"12\" >\r\n                <div class=\"col\">\r\n                    <VuePictureCropper\r\n                        :boxStyle=\"props.boxStyle\"\r\n                        :img=\"Pic\"\r\n                        :options=\"props.options\"\r\n                        @cropend=\"cropend\"\r\n                        @zoom=\"zoom\"\r\n                    />\r\n                </div>\r\n            </el-col>\r\n            <el-col :span=\"12\" class=\"col\">\r\n                <div class=\"border\">\r\n                    <img :src=\"TempPic\" class=\"preview\" />\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>"],"names":["DO_defineComponent","cropper"],"mappings":";;;;;;;;AAEA,MAA6B,cAAAA,eAAmB,CAAA;AAAA,EAC9C,IAAM,EAAA,WAAA;AACR,CAAC,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCD,IAAI,IAAA,GAAA,GAAI,GAAI,CAAA,KAAA,CAAM,GAAG,CAAA,CAAA;AACrB,IAAI,IAAA,OAAA,GAAQ,GAAI,CAAA,KAAA,CAAM,GAAG,CAAA,CAAA;AACzB,IAAA,MAAM,UAAU,MAAI;AAChB,MAAQ,OAAA,CAAA,KAAA,GAAMC,EAAS,UAAW,EAAA,CAAA;AAAA,KACtC,CAAA;AACA,IAAA,MAAM,OAAO,MAAI;AACb,MAAQ,OAAA,CAAA,KAAA,GAAMA,EAAS,UAAW,EAAA,CAAA;AAAA,KACtC,CAAA;AACA,IAAA,MAAM,aAAa,MAAY;AAC3B,MAAAA,CAAA,CAAS,OAAO,CAAG,EAAA,CAAA,CAAA;AAAA,KACvB,CAAA;AACA,IAAA,MAAM,cAAc,MAAY;AAC5B,MAAAA,CAAA,CAAS,OAAO,EAAE,CAAA,CAAA;AAAA,KACtB,CAAA;AACA,IAAA,MAAM,UAAU,MAAY;AACxB,MAAAA,CAAA,CAAS,KAAK,GAAG,CAAA,CAAA;AAAA,KACrB,CAAA;AACA,IAAA,MAAM,eAAe,MAAY;AAC7B,MAAAA,CAAA,CAAS,KAAK,CAAI,GAAA,CAAA,CAAA;AAAA,KACtB,CAAA;AACA,IAAA,MAAM,QAAQ,MAAY;AACtB,MAAAA,CAAA,CAAS,KAAM,EAAA,CAAA;AAAA,KACnB,CAAA;AAEA,IAAA,MAAM,QAAQ,MAAY;AACtB,MAAAA,CAAA,CAAS,KAAM,EAAA,CAAA;AAAA,KACnB,CAAA;AACA,IAAA,IAAI,SAAO,QAAS,CAAA;AAAA,MAChB,OAAQ,EAAA,EAAA;AAAA,MACR,OAAQ,EAAA,EAAA;AAAA,KACX,CAAA,CAAA;AACD,IAAA,MAAM,UAAU,YAA2B;AAEvC,MAAM,MAAA,MAAA,GAAiBA,EAAS,UAAW,EAAA,CAAA;AAG3C,MAAM,MAAA,IAAA,GAAoB,MAAMA,CAAA,CAAS,OAAQ,EAAA,CAAA;AAGjD,MAAM,MAAA,IAAA,GAAO,MAAMA,CAAA,CAAS,OAAQ,CAAA;AAAA,QAChC,QAAU,EAAA,SAAA;AAAA,OACb,CAAA,CAAA;AAED,MAAA,OAAA,CAAQ,GAAI,CAAA,EAAE,MAAQ,EAAA,IAAA,EAAM,MAAM,CAAA,CAAA;AAGlC,MAAA,MAAA,CAAO,OAAU,GAAA,MAAA,CAAA;AACjB,MAAI,IAAA;AACA,QAAA,IAAI,QAAM,IAAK,EAAA;AACX,UAAO,MAAA,CAAA,OAAA,GAAU,GAAI,CAAA,eAAA,CAAgB,IAAI,CAAA,CAAA;AAAA,SAC7C;AAAA,eACK,CAAP,EAAA;AACE,QAAA,MAAA,CAAO,OAAU,GAAA,EAAA,CAAA;AAAA,OACrB;AACA,MAAA,OAAA,CAAQ,IAAI,MAAM,CAAA,CAAA;AAClB,MAAA,KAAA,CAAM,WAAU,MAAM,CAAA,CAAA;AAAA,KAC1B,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}