{"version":3,"file":"upload.mjs","sources":["../../../../../../../packages/components/upload/src/upload.ts"],"sourcesContent":["export class upload{\r\n    \r\n}\r\nexport const getFileType = (fileName:string):any => { //根据文件名判断文件类型\r\n\t// 后缀获取\r\n\tlet suffix:string = '';\r\n\t// 获取类型结果\r\n\tlet result:any = '';\r\n\ttry {\r\n\t\tconst flieArr = fileName.split('.');\r\n\t\tsuffix = flieArr[flieArr.length - 1];\r\n\t} catch (err) {\r\n\t\tsuffix = '';\r\n\t}\r\n\t// fileName无后缀返回 false\r\n\tif (!suffix) {\r\n\t\treturn false;\r\n\t}\r\n\tsuffix = suffix.toLocaleLowerCase();\r\n\t// 图片格式\r\n\tconst imglist:string[] = ['png', 'jpg', 'jpeg', 'bmp', 'gif'];\r\n\t// 进行图片匹配\r\n\tresult = imglist.find(function(item) {\r\n\t\treturn item === suffix\r\n\t});\r\n\tif (result) {\r\n\t\treturn 'image';\r\n\t}\r\n\t// 匹配txt\r\n\tconst txtlist = ['txt'];\r\n\tresult = txtlist.find(function(item) {\r\n\t\treturn item === suffix\r\n\t});\r\n\tif (result) {\r\n\t\treturn 'txt';\r\n\t}\r\n\t// 匹配 excel\r\n\tconst excelist = ['xls', 'xlsx'];\r\n\tresult = excelist.find(function(item) {\r\n\t\treturn item === suffix\r\n\t});\r\n\tif (result) {\r\n\t\treturn 'excel';\r\n\t}\r\n\t// 匹配 word\r\n\tconst wordlist = ['doc', 'docx'];\r\n\tresult = wordlist.find(function(item) {\r\n\t\treturn item === suffix\r\n\t});\r\n\tif (result) {\r\n\t\treturn 'word';\r\n\t}\r\n\t// 匹配 pdf\r\n\tconst pdflist = ['pdf'];\r\n\tresult = pdflist.find(function(item) {\r\n\t\treturn item === suffix\r\n\t});\r\n\tif (result) {\r\n\t\treturn 'pdf';\r\n\t}\r\n\t// 匹配 ppt\r\n\tconst pptlist = ['ppt', 'pptx'];\r\n\tresult = pptlist.find(function(item) {\r\n\t\treturn item === suffix\r\n\t});\r\n\tif (result) {\r\n\t\treturn 'ppt';\r\n\t}\r\n\t// 匹配 视频\r\n\tconst videolist = ['mp4', 'm2v', 'mkv', 'rmvb', 'wmv', 'avi', 'flv', 'mov', 'm4v'];\r\n\tresult = videolist.find(function(item) {\r\n\t\treturn item === suffix\r\n\t});\r\n\tif (result) {\r\n\t\treturn 'video';\r\n\t}\r\n\t// 匹配 音频\r\n\tconst radiolist = ['mp3', 'wav', 'wmv'];\r\n\tresult = radiolist.find(function(item) {\r\n\t\treturn item === suffix\r\n\t});\r\n\tif (result) {\r\n\t\treturn 'radio';\r\n\t}\r\n\t// 匹配 压缩\r\n\tconst compresslist = ['zip', 'rar', '7z',''];\r\n\tresult = compresslist.find(function(item) {\r\n\t\treturn item === suffix\r\n\t});\r\n\tif (result) {\r\n\t\treturn 'compress';\r\n\t}\r\n\t// 其他 文件类型\r\n\treturn 'other';\r\n\r\n}\r\n\r\n\r\nexport const getMIME=async(the_url:string)=> {\r\n    return (await fetch(the_url).then(r => r.blob())).type\r\n}\r\n\r\nexport const checkFileType=(mime:string)=> {\r\n\tif (mime.indexOf(\"image\")>-1){\r\n\t\treturn \"image\"\r\n\t}\r\n\tif (mime==\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"){\r\n\t\treturn \"word\"\r\n\t}\r\n}\r\n// const transBase64FromImage=(url:string)=>{\r\n// \tvar image = new Image();    \r\n// \timage.src = url + \"?\" + Math.random();\r\n// \timage.crossOrigin = '*';\r\n// \timage.onload = function() {\r\n// \t  var canvas = document.createElement(\"canvas\");\r\n// \t  canvas.width = image.width;\r\n// \t  canvas.height = image.height;\r\n// \t  var ctx = canvas.getContext(\"2d\");\r\n// \t  ctx!.drawImage(image, 0, 0, image.width, image.height)\r\n// \t  var ext = image.src.substring(image.src.lastIndexOf(\".\") + 1).toLowerCase();\r\n// \t  var dataURL = canvas.toDataURL(\"image/\" + ext);\r\n// \t  return dataURL\r\n// \t}\r\n// }"],"names":[],"mappings":"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"}